<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Geghtska Elite Crypto</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --primary: #00f2ff;
            --secondary: #7000ff;
            --accent: #f1c40f;
            --bg: #050505;
        }

        body {
            background: var(--bg);
            color: white;
            font-family: 'Segoe UI', sans-serif;
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            height: 100vh;
            overflow: hidden;
            user-select: none;
            touch-action: manipulation;
        }

        /* –ê–Ω—ñ–º–æ–≤–∞–Ω–∏–π —Ñ–æ–Ω */
        .bg-glow {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle at 50% 20%, #1e0044 0%, transparent 50%);
            z-index: -1;
        }

        .header { width: 90%; display: flex; justify-content: space-between; padding: 20px; font-weight: bold; color: var(--accent); letter-spacing: 1px; }

        .balance-box { text-align: center; margin-top: 10px; }
        .balance-label { font-size: 12px; color: #888; text-transform: uppercase; }
        .balance { font-size: 64px; font-weight: 900; text-shadow: 0 0 20px rgba(241, 196, 15, 0.5); color: var(--accent); }

        /* –ö–Ω–æ–ø–∫–∞-–º–æ–Ω–µ—Ç–∞ */
        .main-button {
            position: relative;
            width: 260px; height: 260px;
            margin-top: 20px;
            border-radius: 50%;
            background: linear-gradient(145deg, #1a1a1a, #000);
            display: flex; align-items: center; justify-content: center;
            box-shadow: 0 0 40px rgba(0, 0, 0, 1), inset 0 0 20px rgba(112, 0, 255, 0.3);
            cursor: pointer;
            border: 4px solid #222;
        }
        .main-button::before {
            content: ''; position: absolute; width: 100%; height: 100%;
            border-radius: 50%; border: 2px solid var(--secondary);
            animation: pulse 2s infinite;
        }
        @keyframes pulse { 0% { transform: scale(1); opacity: 0.5; } 100% { transform: scale(1.2); opacity: 0; } }

        .coin-emoji { font-size: 120px; z-index: 2; transition: transform 0.1s; }
        .main-button:active .coin-emoji { transform: scale(0.9); }

        /* –ü–∞–Ω–µ–ª—å —Å—Ç–∞—Ç—ñ–≤ (Glassmorphism) */
        .glass-panel {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(15px);
            border-radius: 25px;
            width: 85%;
            padding: 20px;
            margin-top: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        .energy-header { display: flex; justify-content: space-between; font-size: 14px; margin-bottom: 10px; }
        .energy-bar { background: #111; height: 14px; border-radius: 7px; overflow: hidden; border: 1px solid #333; }
        .energy-fill { 
            background: linear-gradient(90deg, var(--primary), var(--secondary)); 
            height: 100%; width: 100%; transition: width 0.3s cubic-bezier(0.4, 0, 0.2, 1); 
        }

        /* –ù–∞–≤—ñ–≥–∞—Ü—ñ—è */
        .tabs { display: flex; width: 90%; gap: 10px; margin-top: 20px; }
        .tab-btn { 
            flex: 1; padding: 12px; border-radius: 12px; border: 1px solid #333; 
            background: #111; color: #fff; font-weight: bold; cursor: pointer;
        }
        .tab-btn.active { background: var(--secondary); border-color: var(--primary); }

        .content-tab { display: none; width: 100%; }
        .content-tab.active { display: block; }

        /* –ú–∞–≥–∞–∑–∏–Ω —ñ –ó–∞–≤–¥–∞–Ω–Ω—è */
        .list-item {
            background: rgba(255,255,255,0.05); margin: 10px 20px; padding: 15px;
            border-radius: 15px; display: flex; justify-content: space-between; align-items: center;
            border: 1px solid #222;}
        .buy-btn { background: var(--primary); color: #000; border: none; padding: 8px 15px; border-radius: 8px; font-weight: bold; }
    </style>
</head>
<body>

    <div class="bg-glow"></div>

    <div class="header">
        <span>LVL: BRONZE</span>
        <span id="tap-val">TAP X1</span>
    </div>

    <div id="game-tab" class="content-tab active">
        <div class="balance-box">
            <div class="balance-label">–¢–≤—ñ–π –ë–∞–ª–∞–Ω—Å</div>
            <div class="balance" id="bal">0</div>
        </div>

        <div style="display: flex; justify-content: center; width: 100%;">
            <div class="main-button" id="coin-btn">
                <span class="coin-emoji">üêπ</span>
            </div>
        </div>

        <div class="glass-panel">
            <div class="energy-header">
                <span>‚ö° –ï–Ω–µ—Ä–≥—ñ—è</span>
                <span id="en-text">500 / 500</span>
            </div>
            <div class="energy-bar">
                <div class="energy-fill" id="en-fill"></div>
            </div>
        </div>
    </div>

    <div id="shop-tab" class="content-tab">
        <h2 style="text-align: center; color: var(--primary);">–ú–∞–≥–∞–∑–∏–Ω</h2>
        <div class="list-item">
            <div><b>–ú—É–ª—å—Ç—ñ—Ç–∞–ø</b><br><small id="cost-mt">200 –º–æ–Ω–µ—Ç</small></div>
            <button class="buy-btn" onclick="buyMT()">–ö—É–ø–∏—Ç–∏</button>
        </div>
        <div class="list-item">
            <div><b>–ú–∞–∫—Å. –ï–Ω–µ—Ä–≥—ñ—è</b><br><small id="cost-en">250 –º–æ–Ω–µ—Ç</small></div>
            <button class="buy-btn" onclick="buyEN()">–ö—É–ø–∏—Ç–∏</button>
        </div>
    </div>

    <div id="tasks-tab" class="content-tab">
        <h2 style="text-align: center; color: var(--accent);">–ó–∞–≤–¥–∞–Ω–Ω—è</h2>
        <div class="list-item">
            <div><b>–¢–≤—ñ–π –ö–∞–Ω–∞–ª</b><br><small>+50,000 –º–æ–Ω–µ—Ç</small></div>
            <button class="buy-btn" onclick="openTask('–¢–í–û–Ø_–°–ò–õ–ö–ê')">–í–∏–∫–æ–Ω–∞—Ç–∏</button>
        </div>
    </div>

    <div class="tabs">
        <button class="tab-btn active" onclick="showTab('game', this)">–ì—Ä–∞</button>
        <button class="tab-btn" onclick="showTab('shop', this)">–ú–∞–≥–∞–∑–∏–Ω</button>
        <button class="tab-btn" onclick="showTab('tasks', this)">–ó–∞–≤–¥–∞–Ω–Ω—è</button>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();

        let coins = parseInt(localStorage.getItem('coins')) || 0;
        let multitap = parseInt(localStorage.getItem('mt')) || 1;
        let maxEnergy = parseInt(localStorage.getItem('me')) || 500;
        let energy = maxEnergy;

        function updateUI() {
            document.getElementById('bal').innerText = coins.toLocaleString();
            document.getElementById('en-text').innerText = ${Math.floor(energy)} / ${maxEnergy};
            document.getElementById('en-fill').style.width = (energy/maxEnergy*100) + "%";
            document.getElementById('tap-val').innerText = "TAP X" + multitap;
            document.getElementById('cost-mt').innerText = (multitap * 300) + " –º–æ–Ω–µ—Ç";
            document.getElementById('cost-en').innerText = (maxEnergy) + " –º–æ–Ω–µ—Ç";
            
            localStorage.setItem('coins', coins);
            localStorage.setItem('mt', multitap);
            localStorage.setItem('me', maxEnergy);
        }

        function handleTap() {
            if (energy >= multitap) {
                coins += multitap;
                energy -= multitap;
                tg.HapticFeedback.impactOccurred('medium');
                updateUI();
            }
        }

        function showTab(tabId, btn) {
            document.querySelectorAll('.content-tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            document.getElementById(tabId + '-tab').classList.add('active');
            btn.classList.add('active');
        }

        window.buyMT = () => {
            let cost = multitap * 300;
            if (coins >= cost) { coins -= cost; multitap++; updateUI(); }
        };

        window.buyEN = () => {
            let cost = maxEnergy;if (coins >= cost) { coins -= cost; maxEnergy += 200; energy += 200; updateUI(); }
        };

        window.openTask = (url) => {
            tg.openTelegramLink(url);
            tg.showAlert("–ú–æ–Ω–µ—Ç–∏ –±—É–¥—É—Ç—å –Ω–∞—Ä–∞—Ö–æ–≤–∞–Ω—ñ –ø—ñ—Å–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏!");
        };

        // –†–µ–≥–µ–Ω–µ—Ä–∞—Ü—ñ—è –µ–Ω–µ—Ä–≥—ñ—ó (1 –æ–¥–∏–Ω–∏—Ü—è –≤ —Å–µ–∫—É–Ω–¥—É)
        setInterval(() => {
            if (energy < maxEnergy) {
                energy++;
                updateUI();
            }
        }, 1000);

        const btn = document.getElementById('coin-btn');
        btn.addEventListener('touchstart', (e) => { e.preventDefault(); handleTap(); });
        btn.addEventListener('mousedown', handleTap);

        updateUI();
    </script>
</body>
</html>
