<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body { background: #000; color: #fff; text-align: center; font-family: sans-serif; margin: 0; overflow: hidden; touch-action: none; }
        .header { display: flex; justify-content: space-between; padding: 15px; color: orange; font-weight: bold; }
        #bal { font-size: 60px; margin: 20px 0; color: gold; }
        
        /* –ì—ñ–≥–∞–Ω—Ç—Å—å–∫–∞ –∫–Ω–æ–ø–∫–∞ –Ω–∞ –ø—ñ–≤ –µ–∫—Ä–∞–Ω–∞ */
        #coin-zone {
            width: 280px; height: 280px; background: radial-gradient(circle, #f39c12, #d35400);
            border-radius: 50%; display: inline-flex; align-items: center; justify-content: center;
            font-size: 100px; border: 10px solid #222; cursor: pointer;
            -webkit-user-select: none; user-select: none;
        }
        #coin-zone:active { transform: scale(0.95); }

        .stats { background: #111; margin: 20px auto; width: 80%; padding: 15px; border-radius: 15px; border: 1px solid #333; }
        .bar-bg { background: #222; height: 10px; border-radius: 5px; margin-top: 5px; }
        #bar-fill { background: cyan; height: 100%; width: 100%; border-radius: 5px; transition: 0.2s; }
        
        .nav { position: fixed; bottom: 0; width: 100%; display: flex; background: #111; }
        .nav button { flex: 1; padding: 15px; background: none; border: none; color: #888; font-weight: bold; }
        .nav button.active { color: orange; border-top: 2px solid orange; }
        .page { display: none; padding-bottom: 80px; }
        .page.active { display: block; }
    </style>
</head>
<body>

    <div class="header"><span>BRONZE</span><span id="mt-txt">x1</span></div>

    <div id="p-game" class="page active">
        <div id="bal">0</div>
        <div id="coin-zone">üêπ</div>
        <div class="stats">
            <div style="font-size: 12px">‚ö° –ï–ù–ï–†–ì–Ü–Ø: <span id="en-txt">500</span></div>
            <div class="bar-bg"><div id="bar-fill"></div></div>
        </div>
    </div>

    <div id="p-shop" class="page">
        <h2>–ú–ê–ì–ê–ó–ò–ù</h2>
        <button onclick="buyMT()" style="padding: 20px; width: 80%; background: orange; border-radius: 10px; border: none; font-weight: bold;">+1 –î–û –ö–õ–Ü–ö–£ (200 –º–æ–Ω–µ—Ç)</button>
    </div>

    <div class="nav">
        <button id="b-game" class="active" onclick="go('game')">–ì–†–ê</button>
        <button id="b-shop" onclick="go('shop')">–®–û–ü</button>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();

        let coins = parseInt(localStorage.getItem('c')) || 0;
        let mt = parseInt(localStorage.getItem('m')) || 1;
        let en = 500;
        let maxEn = 500;

        function upd() {
            document.getElementById('bal').innerText = coins.toLocaleString();
            document.getElementById('en-txt').innerText = en;
            document.getElementById('bar-fill').style.width = (en/maxEn*100) + "%";
            document.getElementById('mt-txt').innerText = "x" + mt;
            localStorage.setItem('c', coins);
            localStorage.setItem('m', mt);
        }

        // –û–°–ù–û–í–ù–ê –§–£–ù–ö–¶–Ü–Ø –ö–õ–Ü–ö–£
        function tap() {
            if (en >= mt) {
                coins += mt;
                en -= mt;
                tg.HapticFeedback.impactOccurred('light');
                upd();
            }
        }

        function go(p) {
            document.querySelectorAll('.page').forEach(x => x.classList.remove('active'));
            document.querySelectorAll('.nav button').forEach(x => x.classList.remove('active'));
            document.getElementById('p-' + p).classList.add('active');
            document.getElementById('b-' + p).classList.add('active');
        }

        window.buyMT = () => {
            if (coins >= 200) { coins -= 200; mt++; upd(); }
        }

        // –û–±—Ä–æ–±–∫–∞ –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—è –Ω–∞ –∑–æ–Ω—É –º–æ–Ω–µ—Ç–∏
        const zone = document.getElementById('coin-zone');
        zone.addEventListener('touchstart', (e) => {
            e.preventDefault();
            tap();
        });
        zone.onclick = tap;

        // –†–µ–≥–µ–Ω –µ–Ω–µ—Ä–≥—ñ—ó: +1 –∫–æ–∂–Ω—É —Å–µ–∫—É–Ω–¥—É
        setInterval(() => {
            if (en < maxEn) { en++; upd(); }
        }, 1000);

        upd();
    </script>
</body>
</html>
